<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.web.WebView?>

<VBox spacing="16.0" stylesheets="@/application.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="br.edu.fatec.api.controller.orientador.ModalFeedbackController">
    <padding>
        <Insets bottom="16.0" left="16.0" right="16.0" top="16.0" />
    </padding>

    <HBox alignment="CENTER_LEFT" spacing="12.0">
        <Label fx:id="lblTituloModal" styleClass="title" text="Feedback por Campo" />
        <Region HBox.hgrow="ALWAYS" />
        <Label text="Versão:" />
        <Label fx:id="lblVersao" styleClass="subtitle" text="—" />
    </HBox>

    <TabPane fx:id="tabPane" VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE" styleClass="editor-tabs">
        <tabs>

            <Tab fx:id="tabApresentacao" text="Apresentação">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApresentacao" />
                            <VBox fx:id="panePreviewApresentacao" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets left="10.0" right="10.0" top="10.0" />
                                </padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTitulo" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecao" text="Ver Última Correção" />
                                </HBox>

                                <SplitPane fx:id="splitPaneComparacao" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <padding>
                                        <Insets left="10.0" right="10.0" top="10.0" bottom="10.0" />
                                    </padding>
                                    <VBox fx:id="paneVersaoAnterior" spacing="8.0" visible="false" managed="false">
                                        <padding>
                                            <Insets right="5.0" />
                                        </padding>
                                        <Label fx:id="lblTituloAnterior" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApresentacao_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApresentacao_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtual" spacing="8.0">
                                        <padding>
                                            <Insets left="5.0" />
                                        </padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApresentacao" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApresentacao_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApresentacao_Atual" prefRowCount="4" promptText="Digite seu feedback para este campo..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button fx:id="btnAprovarCampo" styleClass="btn-aprovar" onAction="#onAprovarCampo" text="Aprovar Campo" />
                                            <Button fx:id="btnReprovarCampo" styleClass="btn-reprovar" onAction="#onReprovarCampo" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi1" text="API 1">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi1" />
                            <VBox fx:id="panePreviewApi1" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets left="10.0" right="10.0" top="10.0" />
                                </padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi1" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi1" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi1" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi1" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi1" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi1_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi1_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi1" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi1" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi1_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi1_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi2" text="API 2">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi2" />
                            <VBox fx:id="panePreviewApi2" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi2" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi2" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi2" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi2" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi2" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi2_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi2_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi2" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi2" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi2_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi2_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi3" text="API 3">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi3" />
                            <VBox fx:id="panePreviewApi3" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi3" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi3" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi3" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi3" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi3" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi3_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi3_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi3" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi3" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi3_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi3_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi4" text="API 4">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi4" />
                            <VBox fx:id="panePreviewApi4" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi4" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi4" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi4" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi4" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi4" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi4_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi4_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi4" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi4" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi4_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi4_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi5" text="API 5">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi5" />
                            <VBox fx:id="panePreviewApi5" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi5" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi5" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi5" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi5" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi5" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi5_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi5_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi5" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi5" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi5_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi5_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabApi6" text="API 6">
                <content>
                    <SplitPane dividerPositions="0.05" VBox.vgrow="ALWAYS">
                        <items>
                            <ListView fx:id="listCamposApi6" />
                            <VBox fx:id="panePreviewApi6" spacing="10.0" VBox.vgrow="ALWAYS">
                                <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label fx:id="lblCampoTituloApi6" styleClass="subtitle" text="Selecione um campo" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <ToggleButton fx:id="btnToggleCorrecaoApi6" text="Ver Última Correção" />
                                </HBox>
                                <SplitPane fx:id="splitPaneComparacaoApi6" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="paneVersaoAnteriorApi6" spacing="8.0" visible="false" managed="false">
                                        <padding><Insets right="5.0" /></padding>
                                        <Label fx:id="lblTituloAnteriorApi6" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                        <WebView fx:id="webApi6_Anterior" VBox.vgrow="ALWAYS" />
                                        <Label text="Parecer Anterior:" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi6_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                                    </VBox>
                                    <VBox fx:id="paneVersaoAtualApi6" spacing="8.0">
                                        <padding><Insets left="5.0" /></padding>
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                            <Label fx:id="lblCampoStatusApi6" styleClass="badge" />
                                        </HBox>
                                        <WebView fx:id="webApi6_Atual" VBox.vgrow="ALWAYS" />
                                        <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                        <TextArea fx:id="txtParecerApi6_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                        <HBox spacing="8.0">
                                            <Button onAction="#onAprovarCampoApi" text="Aprovar Campo" />
                                            <Button onAction="#onReprovarCampoApi" text="Reprovar Campo" />
                                        </HBox>
                                    </VBox>
                                </SplitPane>
                            </VBox>
                        </items>
                    </SplitPane>
                </content>
            </Tab>

            <Tab fx:id="tabResumo" text="Resumo">
                <content>
                    <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="10.0" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label styleClass="subtitle" text="Resumo Geral da Versão" />
                            <Region HBox.hgrow="ALWAYS" />
                            <ToggleButton fx:id="btnToggleCorrecaoResumo" text="Ver Última Correção" />
                        </HBox>

                        <SplitPane fx:id="splitPaneComparacaoResumo" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                            <VBox fx:id="paneVersaoAnteriorResumo" spacing="8.0" visible="false" managed="false">
                                <padding><Insets right="5.0" /></padding>
                                <Label fx:id="lblTituloAnteriorResumo" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                <WebView fx:id="webResumo_Anterior" VBox.vgrow="ALWAYS" />
                                <Label text="Parecer Anterior:" styleClass="field-label" />
                                <TextArea fx:id="txtParecerResumo_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                            </VBox>
                            <VBox fx:id="paneVersaoAtualResumo" spacing="8.0">
                                <padding><Insets left="5.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                    <Label fx:id="lblResumoVersaoStatus" styleClass="badge" />
                                </HBox>
                                <WebView fx:id="webResumo_Atual" VBox.vgrow="ALWAYS" />
                                <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                <TextArea fx:id="txtParecerResumo_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                <HBox spacing="8.0">
                                    <Button onAction="#onAprovarResumo" text="Aprovar Versão" />
                                    <Button onAction="#onReprovarResumo" text="Reprovar Versão" />
                                </HBox>
                            </VBox>
                        </SplitPane>
                    </VBox>
                </content>
            </Tab>

            <Tab fx:id="tabFinais" text="Considerações Finais">
                <content>
                    <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="10.0" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label styleClass="subtitle" text="Considerações Finais" />
                            <Region HBox.hgrow="ALWAYS" />
                            <ToggleButton fx:id="btnToggleCorrecaoFinais" text="Ver Última Correção" />
                        </HBox>

                        <SplitPane fx:id="splitPaneComparacaoFinais" dividerPositions="0.5" VBox.vgrow="ALWAYS">
                            <VBox fx:id="paneVersaoAnteriorFinais" spacing="8.0" visible="false" managed="false">
                                <padding><Insets right="5.0" /></padding>
                                <Label fx:id="lblTituloAnteriorFinais" text="Versão Anterior (vX.X)" styleClass="field-label" />
                                <WebView fx:id="webFinais_Anterior" VBox.vgrow="ALWAYS" />
                                <Label text="Parecer Anterior:" styleClass="field-label" />
                                <TextArea fx:id="txtParecerFinais_Anterior" prefRowCount="4" editable="false" wrapText="true" />
                            </VBox>
                            <VBox fx:id="paneVersaoAtualFinais" spacing="8.0">
                                <padding><Insets left="5.0" /></padding>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <Label text="Versão Atual (em revisão)" styleClass="field-label" />
                                    <Label fx:id="lblFinaisStatus" styleClass="badge" />
                                </HBox>
                                <WebView fx:id="webFinais_Atual" VBox.vgrow="ALWAYS" />
                                <Label text="Comentário do Orientador (Novo Parecer):" styleClass="field-label" />
                                <TextArea fx:id="txtParecerFinais_Atual" prefRowCount="4" promptText="Digite seu feedback..." wrapText="true" />
                                <HBox spacing="8.0">
                                    <Button onAction="#onAprovarFinais" text="Aprovar Campo" />
                                    <Button onAction="#onReprovarFinais" text="Reprovar Campo" />
                                </HBox>
                            </VBox>
                        </SplitPane>
                    </VBox>
                </content>
            </Tab>
        </tabs>
    </TabPane>

    <HBox alignment="CENTER_RIGHT" spacing="12.0">
        <Button fx:id="btnEnviarDevolutiva" onAction="#onFinalizarDevolutiva" styleClass="btn-primary" text="Finalizar e Enviar Devolutiva" />
        <Button onAction="#fecharModal" text="Fechar" />
    </HBox>
</VBox>