<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17.0.2-ea"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="br.edu.fatec.api.controller.aluno.EditorAlunoController"
>

    <HBox alignment="CENTER_LEFT" spacing="12.0" styleClass="header">
        <padding>
            <Insets top="10.0" right="16.0" bottom="10.0" left="16.0"/>
        </padding>
        <Button fx:id="btnToggleSidebar" text="☰" onAction="#toggleSidebar" styleClass="toggle-sidebar"/>
        <Label styleClass="logo" text="API/TG"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Home" onAction="#goHome"/>
        <Button text="Sair" onAction="#logout"/>
    </HBox>

    <HBox fx:id="mainLayout" VBox.vgrow="ALWAYS" spacing="16.0">
        <padding>
            <Insets top="16.0" right="16.0" bottom="16.0" left="16.0"/>
        </padding>

        <VBox fx:id="sidebar" minWidth="240.0" spacing="8.0" styleClass="sidebar">
            <Label styleClass="sidebar-title" text="Aluno"/>

            <Label styleClass="sidebar-group" text="GERAL"/>
            <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                    styleClass="sidebar-link" text="Dashboard" onAction="#goDashboard"/>
            <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                    onAction="#goInbox" styleClass="sidebar-link" text="Inbox"/>

            <Label styleClass="sidebar-group" text="TG"/>
            <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                    styleClass="sidebar-link" text="Editor de TG" onAction="#goEditor"/>
            <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                    styleClass="sidebar-link" text="Comparar Versões" onAction="#goComparar"/>
        </VBox>

        <VBox HBox.hgrow="ALWAYS" spacing="16.0" styleClass="card">

            <VBox spacing="6.0">
                <Label styleClass="title" text="Aluno — Editor"/>
                <Label styleClass="subtitle"
                       text="Preencha cada aba. O Markdown final será montado automaticamente."/>
            </VBox>

            <HBox spacing="12.0" VBox.vgrow="ALWAYS">

                <VBox  HBox.hgrow="ALWAYS" spacing="6.0" VBox.vgrow="ALWAYS">
                    <HBox styleClass="markdown-toolbar" alignment="CENTER_LEFT" spacing="6.0">
                        <Button text="B" onAction="#toggleBold"/>
                        <Button text="I" onAction="#toggleItalic"/>
                        <Button text="U" onAction="#toggleUnderline"/>
                        <Button text="H1" onAction="#insertH1"/>
                        <Button text="Link" onAction="#insertLink"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lbStatusAba" text="Aba 1 - Status: ..." styleClass="status-badge"/>

                        <Button fx:id="btnPreview" text="Preview" onAction="#preview">
                            <tooltip>
                                <Tooltip text="Pré-visualizar Markdown montado"/>
                            </tooltip>
                        </Button>

                        <Button fx:id="btnSalvarTudo" text="Salvar tudo" onAction="#salvarTudo">
                            <tooltip><Tooltip text="Salva todas as abas (versão nova)"/></tooltip>
                        </Button>

                        <Button fx:id="btnSolicitarRevisao" text="Solicitar Revisão" onAction="#handleSolicitarRevisao" styleClass="btn-primary">
                            <tooltip><Tooltip text="Envia esta versão para avaliação do orientador."/></tooltip>
                        </Button>
                    </HBox>

                    <TabPane fx:id="tabPane" VBox.vgrow="ALWAYS" styleClass="editor-tabs">

                        <Tab text="1) Apresentação" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0" />
                                    </padding>

                                    <TitledPane text="Informações Pessoais" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblInfoPessoaisStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taInfoPessoais" promptText="Nome, curso, semestre, RA..." />
                                        </VBox>
                                    </TitledPane>

                                    <TitledPane text="Histórico Acadêmico" expanded="false" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblHistoricoAcadStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taHistoricoAcad" promptText="Formações, certificações..." />
                                        </VBox>
                                    </TitledPane>

                                    <TitledPane text="Motivação para Ingressar na FATEC" expanded="false" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblMotivacaoStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taMotivacao" promptText="Motivações e objetivos..." />
                                        </VBox>
                                    </TitledPane>

                                    <TitledPane text="Histórico Profissional" expanded="false" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblHistoricoProfStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taHistoricoProf" promptText="Experiências, estágios..." />
                                        </VBox>
                                    </TitledPane>

                                    <TitledPane text="Contatos" expanded="false" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblContatosStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taContatos" promptText="E-mail, GitHub, LinkedIn..." />
                                        </VBox>
                                    </TitledPane>

                                    <TitledPane text="Principais Conhecimentos" expanded="false" contentDisplay="RIGHT">
                                        <graphic>
                                            <Label fx:id="lblConhecimentosStatus" styleClass="badge" />
                                        </graphic>
                                        <VBox spacing="6.0">
                                            <padding>
                                                <Insets top="8.0" right="8.0" bottom="8.0" left="8.0" />
                                            </padding>
                                            <TextArea fx:id="taConhecimentos" promptText="Stacks, linguagens, ferramentas..." />
                                        </VBox>
                                    </TitledPane>
                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="2) API 1º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi1Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi1Problema" promptText="Problema (mín. 3 linhas)"/>
                                    <TextArea fx:id="taApi1Solucao" promptText="Solução (≈5 linhas; tipo do sistema)"/>
                                    <TextField fx:id="tfApi1Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi1Tecnologias" promptText="Tecnologias (tabela/itens)"/>
                                    <TextArea fx:id="taApi1Contrib"
                                              promptText="Contribuições pessoais (≥5 linhas; papel Scrum)"/>
                                    <TextArea fx:id="taApi1Hard" promptText="Hard skills (tabela/itens)"/>
                                    <TextArea fx:id="taApi1Soft" promptText="Soft skills (caso real)"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="3) API 2º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi2Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi2Problema" promptText="Problema"/>
                                    <TextArea fx:id="taApi2Solucao" promptText="Solução"/>
                                    <TextField fx:id="tfApi2Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi2Tecnologias" promptText="Tecnologias"/>
                                    <TextArea fx:id="taApi2Contrib" promptText="Contribuições pessoais"/>
                                    <TextArea fx:id="taApi2Hard" promptText="Hard skills"/>
                                    <TextArea fx:id="taApi2Soft" promptText="Soft skills"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="4) API 3º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi3Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi3Problema" promptText="Problema"/>
                                    <TextArea fx:id="taApi3Solucao" promptText="Solução"/>
                                    <TextField fx:id="tfApi3Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi3Tecnologias" promptText="Tecnologias"/>
                                    <TextArea fx:id="taApi3Contrib" promptText="Contribuições pessoais"/>
                                    <TextArea fx:id="taApi3Hard" promptText="Hard skills"/>
                                    <TextArea fx:id="taApi3Soft" promptText="Soft skills"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="5) API 4º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi4Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi4Problema" promptText="Problema"/>
                                    <TextArea fx:id="taApi4Solucao" promptText="Solução"/>
                                    <TextField fx:id="tfApi4Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi4Tecnologias" promptText="Tecnologias"/>
                                    <TextArea fx:id="taApi4Contrib" promptText="Contribuições pessoais"/>
                                    <TextArea fx:id="taApi4Hard" promptText="Hard skills"/>
                                    <TextArea fx:id="taApi4Soft" promptText="Soft skills"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="6) API 5º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi5Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi5Problema" promptText="Problema"/>
                                    <TextArea fx:id="taApi5Solucao" promptText="Solução"/>
                                    <TextField fx:id="tfApi5Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi5Tecnologias" promptText="Tecnologias"/>
                                    <TextArea fx:id="taApi5Contrib" promptText="Contribuições pessoais"/>
                                    <TextArea fx:id="taApi5Hard" promptText="Hard skills"/>
                                    <TextArea fx:id="taApi5Soft" promptText="Soft skills"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="7) API 6º" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <TextField fx:id="tfApi6Empresa" promptText="Empresa Parceira"/>
                                    <TextArea fx:id="taApi6Problema" promptText="Problema"/>
                                    <TextArea fx:id="taApi6Solucao" promptText="Solução"/>
                                    <TextField fx:id="tfApi6Repo" promptText="Link do repositório (GitHub)"/>
                                    <TextArea fx:id="taApi6Tecnologias" promptText="Tecnologias"/>
                                    <TextArea fx:id="taApi6Contrib" promptText="Contribuições pessoais"/>
                                    <TextArea fx:id="taApi6Hard" promptText="Hard skills"/>
                                    <TextArea fx:id="taApi6Soft" promptText="Soft skills"/>

                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="8) Tabela Resumo" closable="false">
                            <ScrollPane fitToWidth="true">
                                <VBox spacing="8.0">
                                    <padding>
                                        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                    </padding>
                                    <GridPane hgap="8.0" vgap="8.0">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="20"/>
                                            <ColumnConstraints percentWidth="30"/>
                                            <ColumnConstraints percentWidth="50"/>
                                        </columnConstraints>
                                        <Label text="Semestre" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                        <Label text="Empresa Parceira" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                        <Label text="Solução Desenvolvida" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem1" promptText="1º" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp1" promptText="Empresa..." GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol1" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem2" promptText="2º" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp2" promptText="Empresa..." GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol2" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem3" promptText="3º" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp3" promptText="Empresa..." GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol3" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem4" promptText="4º" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp4" promptText="Empresa..." GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol4" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="4" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem5" promptText="5º" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp5" promptText="Empresa..." GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol5" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="5" GridPane.columnIndex="2"/>
                                        <TextField fx:id="tfSem6" promptText="6º" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                                        <TextField fx:id="tfEmp6" promptText="Empresa..." GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                                        <TextArea fx:id="taSol6" promptText="Solução..." prefRowCount="2" GridPane.rowIndex="6" GridPane.columnIndex="2"/>
                                    </GridPane>
                                </VBox>
                            </ScrollPane>
                        </Tab>

                        <Tab text="9) Considerações Finais" closable="false">
                            <VBox spacing="8.0">
                                <padding>
                                    <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
                                </padding>
                                <TextArea fx:id="taConclusoes" promptText="Conclusões finais..."/>
                            </VBox>
                        </Tab>
                    </TabPane>
                </VBox>

                <ScrollPane fitToWidth="true" prefWidth="320.0">
                    <VBox fx:id="commentsSection" spacing="8.0" styleClass="comments-section"/>
                </ScrollPane>
            </HBox>
        </VBox>
    </HBox>

    <HBox alignment="CENTER" spacing="12.0" styleClass="footer">
        <padding>
            <Insets top="12.0" right="12.0" bottom="12.0" left="16.0"/>
        </padding>
        <Label styleClass="subtle" text="TG Connect API 2025-2"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label styleClass="subtle" text="Grupo LizardsDBA"/>
    </HBox>
</VBox>