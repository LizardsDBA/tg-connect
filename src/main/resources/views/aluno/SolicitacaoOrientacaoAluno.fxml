<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="br.edu.fatec.api.controller.aluno.SolicitacaoOrientacaoAlunoController"
            styleClass="main-container"
            stylesheets="@/application.css">

    <!-- Header -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12.0" styleClass="header">
            <padding>
                <Insets top="10.0" right="16.0" bottom="10.0" left="16.0"/>
            </padding>
            <Button fx:id="btnToggleSidebar" text="☰" onAction="#toggleSidebar" styleClass="toggle-sidebar"/>
            <Label styleClass="logo" text="API/TG"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Home" onAction="#goHome"/>
            <Button text="Sair" onAction="#logout"/>
        </HBox>
    </top>

    <!-- Main Content -->
    <center>
        <HBox fx:id="mainLayout" spacing="16.0">
            <padding>
                <Insets top="16.0" right="16.0" bottom="16.0" left="16.0"/>
            </padding>

            <!-- Sidebar -->
            <VBox fx:id="sidebar" minWidth="240.0" spacing="8.0" styleClass="sidebar">
                <Label styleClass="sidebar-title" text="Aluno"/>
                <Label styleClass="sidebar-group" text="GERAL"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goDashboard" styleClass="sidebar-link" text="Dashboard"/>

                <Label styleClass="sidebar-group" text="FERRAMENTAS"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goEditor" styleClass="sidebar-link" text="Editor de TG"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goInbox" styleClass="sidebar-link" text="Mensagens"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goComparar" styleClass="sidebar-link" text="Comparar Versões"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goHistorico" styleClass="sidebar-link" text="Histórico"/>
                <Button alignment="BASELINE_LEFT" maxWidth="1.7976931348623157E308"
                        onAction="#goConclusao" styleClass="sidebar-link" text="Conclusão"/>
            </VBox>

            <!-- Main Content -->
            <VBox spacing="20" HBox.hgrow="ALWAYS" styleClass="card" alignment="TOP_CENTER">
                <padding>
                    <Insets top="40" right="40" bottom="40" left="40"/>
                </padding>

                <Label text="Solicitação de Orientação" styleClass="title"/>
                <Label text="Escolha um professor orientador para acompanhar seu Trabalho de Graduação"
                       styleClass="subtitle" wrapText="true"/>

                <Separator/>

                <!-- Container: Formulário de Solicitação -->
                <VBox fx:id="containerSolicitacao" spacing="20" visible="false" managed="false" VBox.vgrow="ALWAYS">
                    <Label text="Orientadores Disponíveis" styleClass="subtitle"/>

                    <TableView fx:id="tblOrientadores" VBox.vgrow="ALWAYS" minHeight="300">
                        <columns>
                            <TableColumn fx:id="colNome" text="Nome" prefWidth="250"/>
                            <TableColumn fx:id="colEmail" text="E-mail" prefWidth="250"/>
                        </columns>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button fx:id="btnSolicitar" text="Solicitar Orientação" styleClass="btn-primary"/>
                    </HBox>
                </VBox>

                <!-- Container: Aguardando Aprovação -->
                <VBox fx:id="containerAguardando" spacing="15" visible="false" managed="false">
                    <Label text="Solicitação Enviada" styleClass="subtitle"/>

                    <Label fx:id="lblStatusSolicitacao" styleClass="pill" wrapText="true"/>

                    <VBox spacing="5">
                        <Label text="Orientador:" styleClass="field-label"/>
                        <Label fx:id="lblOrientadorSolicitado" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label text="Data da Solicitação:" styleClass="field-label"/>
                        <Label fx:id="lblDataSolicitacao" styleClass="subtle"/>
                    </VBox>

                    <Label text="Aguarde a resposta do orientador. Você será notificado quando houver uma resposta."
                           wrapText="true" styleClass="subtle"/>
                </VBox>

                <!-- Container: Solicitação Recusada -->
                <VBox fx:id="containerRecusada" spacing="15" visible="false" managed="false">
                    <Label text="Solicitação Recusada" styleClass="subtitle" style="-fx-text-fill: #b20f19;"/>

                    <VBox spacing="5">
                        <Label text="Orientador:" styleClass="field-label"/>
                        <Label fx:id="lblOrientadorRecusado" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="5">
                        <Label text="Justificativa:" styleClass="field-label"/>
                        <Label fx:id="lblJustificativa" wrapText="true"
                               style="-fx-padding: 10; -fx-background-color: #fff3f3; -fx-border-color: #ffcccc; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <Label text="Você pode fazer uma nova solicitação para outro orientador."
                           wrapText="true" styleClass="subtle"/>

                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button fx:id="btnNovaSolicitacao" text="Nova Solicitação" styleClass="btn-primary"/>
                    </HBox>
                </VBox>
            </VBox>
        </HBox>
    </center>

    <!-- Footer -->
    <bottom>
        <HBox alignment="CENTER" styleClass="footer" spacing="0">
            <padding>
                <Insets top="10.0" right="16.0" bottom="10.0" left="16.0"/>
            </padding>
            <Label text="TG Connect API 2025-2" styleClass="footer-text"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Grupo LizardsDBA" styleClass="footer-text"/>
        </HBox>
    </bottom>
</BorderPane>